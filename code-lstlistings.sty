\usepackage{listings}
\usepackage{xcolor}

%-----------------------------------------------------
% LISTING CONFIGURATIONS
%-----------------------------------------------------

\crefname{lstlisting}{listing}{listing}	
\Crefname{lstlisting}{Listing}{Listing}
\renewcommand\lstlistlistingname{List of Listings}

\lstset{
  showstringspaces=false,
  basicstyle=\scriptsize\ttfamily,
  commentstyle={\color{olive}},
  identifierstyle=\color{black},
  ndkeywordstyle={\color{blue}},
  stringstyle={\color{magenta}},
  emphstyle={},
  keywordstyle={\color{blue}},
  breaklines=true,
  numbers=left,
  numberstyle=\tiny\color{gray},
  numbersep=10pt,
  tabsize=2,
  extendedchars=true,
  frame=single,
  frameround=none,
  rulecolor=\color{gray},
  xleftmargin=0.5cm,
  framesep=4pt,
}

\lstdefinelanguage{Kotlin}{
	comment=[l]{//},
	emph={delegate, filter, first, firstOrNull, forEach, lazy, map, mapNotNull, println, return@},
	keywords={abstract, actual, as, as?, break, by, class, companion, continue, data, do, dynamic, else, enum, expect, false, final, for, fun, get, if, import, in, interface, internal, is, null, object, override, package, private, public, return, set, super, suspend, this, throw, true, try, typealias, val, var, vararg, when, where, while},
	morecomment=[s]{/*}{*/},
	morestring=[b]",
	morestring=[s]{"""*}{*"""},
	ndkeywords={@Deprecated, @JvmField, @JvmName, @JvmOverloads, @JvmStatic, @JvmSynthetic, Array, Byte, Double, Float, Int, Integer, Iterable, Long, Runnable, Short, String, Unit, it},
	sensitive=true
}

% ======================================================
% === Minted + Listings Compatibility Layer ============
% ======================================================

% Prevent minted from redefining 'listing' environment name
\usepackage[newfloat]{minted}
\usepackage{caption}
\usepackage{chngcntr}

% Make minted floats independent of listings
\SetupFloatingEnvironment{listing}{name=Listing}
\captionsetup[listing]{position=bottom}

% Define separate environments for minted code (so it doesn't conflict)
\newenvironment{code}{\captionsetup{type=listing}}{}

\setminted{
  frame=single,
  framesep=4pt,
  rulecolor=\color{gray},
  bgcolor=white,
  fontsize=\scriptsize,
  breaklines=true,
  linenos=true,
  numbersep=10pt,
  xleftmargin=0.5cm,
  framerule=0.4pt
}

% Configure minted styles
\setminted[turtle]{
	linenos=true,
	breaklines=true,
	fontsize=\scriptsize,
}
\setminted[sparql]{
	linenos=true,
	breaklines=true,
	fontsize=\scriptsize,
}

