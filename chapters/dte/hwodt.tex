Answering \ref{rq:2}, this chapter presents a proposal for the engineering of \emph{Heterogeneous} \acp{DTE} (\Cref{chap:dte:dte}).
%
Motivated by the design of the Web and its success in creating interoperability among digital services---more recently, in \ac{IoT} systems through the \ac{WoT} (\Cref{chap:back:Web})---the chapter explores whether and to what extent hypermedia principles and Web standards can be applied to design and implement \acp{DTE}. 
%
The result of this investigation, refines and extend the ideas originally presented in \cite{web-of-dt-ricci-2022}, combining the \ac{WoDT} conceptual model with the design rationale of the Web to build a \emph{\ac{HWoDT}}.

This approach offers a practical implementation strategy for \acp{DTE}, enabling interoperability at both the \ac{DT} and ecosystem levels, and facilitating uniform interaction across \acp{DT} regardless of the underlying technological stack.

The chapter presents the \ac{HWoDT} conceptual integration of hypermedia principles and Web standards in \ac{DTE}, 
and the prototype implementation of a supporting set of tools that demonstrate the feasibility of the approach.


%======================================================
\section{A \acl{HWoDT}}
\label{sec:hwodt-idea}
%======================================================

The main driver of the proposed approach is to support seamless integration of existing \acp{DT}, regardless of their underlying technologies and with minimal overhead.
%
Hence, the core idea is to hide the heterogeneity of \acp{DT} behind a \emph{uniform interface} built with Web protocols and standards, and supported by an explicit semantic layer that allows \acp{DT} to provide a uniform description of both their state and their features and services. 
%
Thus, the name \emph{\acf{HWoDT}}, aims to emphasize the hypermedia-driven nature of the approach, following the \ac{HATEOAS} principle of the \ac{REST} architectural style~\cite{fielding2000architectural}.

Such an interoperability layer enables navigation and seamless interaction with heterogeneous \acp{DT}.
%
To complement it with additional ecosystem-level functionalities, the idea of a \emph{WoDT Platform} is introduced as both a scope boundary defining ecosystem membership and an aggregation layer enabling consumers to query, observe, and exploit services across distributed \acp{DT}.

As illustrated in \Cref{fig:hwodt}, the resulting architecture is composed of \acp{DT}:
\begin{inlinelist}
    \item created using heterogeneous technologies,
    \item implementing the uniform interface through \emph{adapters},
    \item connected by relationships that reflect the physical ones,
    \item and that are aggregated into \acp{DTE} by being registered to one or multiple WoDT Platforms.
\end{inlinelist}    

\begin{figure}[htb]
  \centering
  \includegraphics[width=0.8\columnwidth]{figures/hwodt/hwodt.pdf}
  \caption{The Hypermedia WoDT scheme, in the real world PAs (squares) belonging to different organizations and domains are connected by relationships. In the digital world, cross-domain ecosystems of DTs (circles) mirror different portions of reality, supported by the WoDT Platform. Consumers (top) can interact with the ecosystem and its DTs directly, or through the platform.}
  \label{fig:hwodt}
\end{figure}

%-----------------------------------------------------------
\subsection{A Uniform Interface for Heterogeneous DTs}
\label{ssec:uniform-interface}
%-----------------------------------------------------------

The first step towards integrating heterogeneous \acp{DT} is to look into how each individual \ac{DT} can expose a uniform interface, compliant with the requirements of the \ac{HWoDT}.
Achieving standard semantic representations of \acp{DT} is an open challenge for the \ac{DT} community.
%
In this work, adopting a pragmatic approach, the benefits of uniform semantic representations in building interoperability are demonstrated through a proposal grounded on the \ac{HATEOAS} principle of the Web architecture:
each \ac{DT} must be able to provide consumers with both \emph{data} and \emph{affordances}---i.e., action possibilities---through hypermedia representations.
This leads to distinguish two logically different representations:
\begin{itemize}
    \item a \emph{\acf{DTD}}, inspired by the \ac{WoT} \acl{TD}, to hold metadata and affordances, enabling consumers to understand the \ac{DT} model, as well as which services the \ac{DT} exposes and how to access them;
    \item a \emph{\acf{DTKG}} representing the live state of the \ac{DT}, semantically encoding domain knowledge and supporting state observation, querying, and discovering relationships between \acp{DT}.
\end{itemize}

Each \ac{DT} is further required to comply with a set of standard \emph{interaction patterns} to allow consumers to uniformly obtain and manipulate such representations for all \acp{DT} in the \ac{HWoDT}.

%.................................
\subsubsection{The \acl{DTD}}
%.................................

The \ac{DTD} serves the primary purpose of providing management metadata about a \ac{DT}, registering it within the ecosystem and describing the exposed interactions\footnote{Documentation on the structure of the \ac{DTD} schema is available on GitHub \url{https://github.com/Web-of-Digital-Twins/dtd-conceptual-model}}.

A primary concern is \emph{identification} of the \ac{DT} and the associated \ac{PA} to unambiguously distinguish them from other elements of the ecosystem.
While \acp{PA} may use domain-specific identifiers (e.g., a serial number), each \ac{DT} in a \ac{HWoDT} is identified with a persistent, globally unique \ac{URI}.
This ensures identification and accessibility of \acp{DT} as Web resources throughout their whole lifecycle.

Furthermore, to support navigation from a \ac{DT} to the ecosystem it is part of, the \ac{DTD} also links to the \ac{URI} of the ecosystem---in the prototype implementation this is a URI served by the \ac{WoDT} platform to identify the \ac{DTE}.

Other relevant metadata in the \ac{DTD} concerns the model used to represent the \ac{PA} at the digital level.
%
The \ac{WoDT} metamodel (\Cref{sec:back:dt:dte})---closely aligned with the  \ac{WoT} \ac{TD}---can describe the \ac{DT} in terms of which properties, relationships, events, and actions are available to \ac{DT} consumers. 

Finally, the \ac{DTD} presents a description of the \ac{API} that consumers can use to interact with the \ac{DT}, using hypermedia controls to describe protocol bindings for the exposed interaction patterns.
%
The \ac{DTD}, is thus aligned with \ac{REST} principles as it presents both data and controls to consumers using self-descripting messages.

Even if the \ac{DTD} may evolve with new properties or interactions when a \ac{DT} gets updated, it remains mostly static as it describes the \ac{DT}'s identity metadata and software interface, not its real-time state.

%.................................
\subsubsection{The \acl{DTKG}}
%.................................

As a \ac{DT} main responsibility is to provide an up-to-date representation of the \ac{PA} state, the \ac{DTKG} complements the \ac{DTD} by representing the live state of the \ac{DT} with a \ac{KG}.

The \ac{DTKG} by means of \ac{RDF} triples, represents:
\begin{itemize}
    \item current property values;
    \item current relationships with other \acp{DT};
    \item context-dependent available actions.
\end{itemize}
Events, generated by the \ac{DT} are excluded from this representation as they are non-persistent information handled via subscriptions.

By using \ac{RDF}, the \ac{DTKG} can represent knowledge about the \ac{DT}'s state with explicit semantics using domain-specific ontologies to support a common interpretation of \ac{DT} data.
Additionally, following the Linked Data principles~\cite{Bizer_Heath_Berners-Lee_2023}, \acp{DT} linking to other \acp{DT} through relationships supports navigating across the ecosystem in a distributed \ac{KG}.

%.............................................
\subsubsection{\acl{DT} Interaction Patterns}
%.............................................

Other than generating the necessary \ac{DTD} and \ac{DTKG} each \ac{DT} in a \ac{HWoDT} ecosystem is required to implement a Web \ac{API} for consumers. This enables direct use by any Web client.

First, the \ac{API} should expose methods to retrieve the two \ac{DT} representations presented above.
%
As the main function of a \ac{DT} is to represent the \ac{PA} state over time, when dereferencing the \ac{URI} which identifies the \ac{DT} with an HTTP GET request the \ac{DT} must return the current \emph{snapshot} of the \ac{DTKG}.

\begin{figure}[tb]
    \centering
    \begin{subfigure}[t]{0.45\columnwidth}
        \centering
        \includegraphics[width=\textwidth]{figures/hwodt/dtddtkg.pdf}
        \caption{}
        \label{fig:sequence-dtddtkg}
    \end{subfigure}
    \hfill
    \begin{subfigure}[t]{0.46\columnwidth}
        \centering
        \includegraphics[width=\textwidth]{figures/hwodt/dtdactioncrop.pdf}
        \caption{}
        \label{fig:sequence-action}
    \end{subfigure}
    \caption{Interaction patterns to (a) access the \ac{DTD} and \ac{DTKG} and (b) invoke available actions on a \ac{DT} through the uniform interface and standard Web patterns.}
    \label{fig:sequence-interactions}
\end{figure}



Technically, since a \ac{DT} qualifies as a \emph{non-information resource}\footnote{For a discussion on information vs. non-information resources see \url{https://www.w3.org/TR/cooluris/} and \url{https://lists.w3.org/Archives/Public/www-tag/2005Jun/0039.html}}
the standard Web practice is returning a 303 (See Other) status code with the \textit{Location} HTTP header set to the \ac{URL} of the \ac{DTKG} information resource.
%
The \ac{URL} of the \ac{DTD} is linked in an HTTP Link Header with a custom relation type \texttt{dtd} in the response of the \ac{DTKG} GET request.
%
In this way, consumers can follow links between resources and access both \ac{DT} representations with standard Web interactions as shown in \Cref{fig:sequence-dtddtkg}.

Since the \ac{DTKG} evolves over time to reflect the \ac{PA} state, \acp{DT} are required to support a subscription \ac{API} to observe such changes (e.g., via WebSockets, long-polling, or WebSub~\cite{websub}).
Modeling the \ac{DTKG} as a Web resource also enables basic historicization using protocols like Memento~\cite{rfc7089}, if the \ac{DT} acts as a Memento TimeGate.

Finally, the \ac{API} may expose \ac{DT} actions that can be invoked by external consumers.
The \ac{DTKG} shows which actions are currently valid, while the \ac{DTD} describes how to request their execution to the \ac{DT}.
Consumers rely on both to interact and invalid actions should fail (e.g., with HTTP 403), ensuring consistency with the \ac{DT} model.
%
Figure \ref{fig:sequence-action} illustrates the interaction pattern to invoke an action on a \ac{DT}, by first checking its availability in the \ac{DTKG} and then following the affordance described in the \ac{DTD} to execute it.

%---------------------------------------------
\subsection{Ecosystem Services in the HWoDT}
\label{ssec:ecosystem-services}
%---------------------------------------------

In the proposal for realizing the \ac{HWoDT} ecosystem functionalities described in \Cref{chap:dte:dte} are implemented through a middleware:
%
the \emph{\ac{WoDT} Platform} aggregates data from registered \acp{DT} and exposes an \ac{API} that consumers can use to manage and interact with the ecosystem as a whole.

%........................................
\subsubsection{Managing the \acl{HWoDT}}
%........................................

The \ac{HWoDT} proposal assumes that \acp{DT} are existing, independently running software entities which implement the uniform interface presented in \Cref{ssec:uniform-interface}.
%
Hence, the \ac{DT} creation is handled by developers with their technology of choice, and adding it to an ecosystem is simply a matter of registering it to a \ac{WoDT} Platform. 
%
The platform exposes an \ac{API} that either managers, an external service or a \ac{DT} itself, can use to submit a \ac{DTD} to register a new \ac{DT} to the ecosystem.
The \ac{DTD} is then stored in a registry, which further allows it to be updated or removed if the \ac{DT} leaves the ecosystem.
%
Consumers can also use the registry \ac{API} to discover which \acp{DT} are in the ecosystem and to filter them based on metadata in the \ac{DTD}---e.g., they can discover if multiple \acp{DT} in the ecosystem model the same \ac{PA} filtering on the \ac{PA} identifier.

These simple operations are sufficient to manage the ecosystem. 
%
The \ac{DTD} is used in the registration process as it provides the necessary metadata to assess membership and compliance requirements as well as the \ac{API} description that the platform can use to interact with the \ac{DT} upon registration.
% 
Once registered, the platform uses the \ac{API} description within the \ac{DTD} to access and observe the \ac{DTKG}.  
It can also notify successful registration, enabling the \ac{DT} to record the platform \ac{URI} in its list of ecosystems updating its \ac{DTD} accordingly.

%..........................................
\subsubsection{Exploiting the \acl{HWoDT}}
%..........................................

By observing each individual \ac{DTKG}, the platform can cache the latest update and aggregate them to create a global \ac{DTE} \ac{KG} that can be exploited to implement ecosystem-level services for consumers.
%
The \ac{DTD} and \ac{DTKG} of each \ac{DT} are stored within the \ac{KG}, allowing queries to easily retrieve all available information about a \ac{DT}.
%
Each update of a \ac{DTKG} is processed and merged in the global \ac{KG} so that current representation of the whole ecosystem is always available to consumers.



The \ac{DTE} is a non-information resource and has a \ac{URI} which, when dereferenced, returns the global \ac{DTE} \ac{KG}\footnote{As the ecosystem \ac{KG} can be very large, returning the whole thing can be impractical. Alternatives include returning a partial representation with links to the \acp{DT} caches}.
%
Consumers can also \emph{query} the \ac{DTE} \ac{KG} through the \ac{WoDT} platform SPARQL endpoint.
%
This enables the extraction of selected information from the current state of all \acp{DT} in the ecosystem with a standard query language.

Finally, consumers may want to observe the evolution of the ecosystem \ac{KG}. The platform must then support an \ac{API} to receive subscription requests and send updates to observers.
%
Given the large nature of the \ac{DTE} \ac{KG}, consumers might not be interested in receiving \emph{all} updates. Hence, techniques for \ac{RDF} stream processing~\cite{barbieri2009www} might be more effective to support selective observation.

%======================================================
\section{A Prototype Framework for the HWoDT}
\label{sec:hwodt-impl}
%======================================================

To support the prototyping of heterogeneous \acp{DTE} based on the \ac{HWoDT} proposal, a set of tools is implemented aiming at the integration of existing \ac{DT} technologies.
%
The HWoDT framework is open source and available on GitHub\footnote{\url{https://github.com/Web-of-Digital-Twins}}. 

The software distribution includes a prototype \emph{\ac{WoDT} Platform} implementation and \emph{adapters} to implement the \ac{HWoDT} uniform interface for \acp{DT} developed with \azureTwin{}, \ditto{}, and the \ac{WLDT} framework (\Cref{sec:dte:engineering-dt:wldt-framework}).
%
The technology choice is meant to be representative of the state of the art as they differ in terms of functionalities, namely \azureTwin{} is a cloud platform, Ditto is an open-source platform, and \ac{WLDT} allows developing and deploying \acp{DT} as standalone software processes.
This section presents the overall architecture (\Cref{fig:abstract_arch}) and its implementation.


\begin{figure}[tb]
  \centering
  \includegraphics[width=0.8\columnwidth]{figures/hwodt/abstract_arch.pdf}
  \caption{Overall abstract architecture of the \ac{HWoDT} framework, showing the main functional modules and their main interactions. 
  On the top, the \ac{WoDT} platform manages the ecosystem of \acp{DT} by registering them through their \acp{DTD}, observing their \acp{DTKG}, and exposing the \ac{DTE} \ac{KG} to consumers.
  On the bottom, existing \acp{DT} can implement the \ac{HWoDT} uniform interface through the \ac{HWoDT} adapter and be integrated with the platform.}
  \label{fig:abstract_arch}
\end{figure}



%----------------------------------------------
\subsection{A WoT-compatible \acl{DTD}}
%----------------------------------------------

The \ac{DTD} is a central component in the design of the uniform interface of the \ac{HWoDT}.
%
Its design is inspired to the \ac{WoT} \ac{TD}, as an \ac{API} description of the functionalities offered by a \ac{DT}.

Although the \ac{WoT} explicitly reference \acp{DT} in its architectural patterns, the \ac{TD} alone does not support all the metadata that are needed in the proposed \ac{DTD}.
Hence, using \ac{WoT}-compliant mechanisms, \acp{TD} are extended to include the relevant metadata in order to qualify as a functional \ac{DTD} for a prototype implementation of the \ac{HWoDT}.
%
Namely, the \ac{TD} is extended using a custom \emph{\ac{WoDT} vocabulary}\footnote{\url{https://github.com/Web-of-Digital-Twins/wodt-vocabulary}}
which defines concepts to implement the \ac{DTD} and the \ac{DTKG}, as well as HTTP Link Headers relation types used in the interactions of the \ac{HWoDT} (see \Cref{ssec:uniform-interface}).
%
\Cref{lst:dtd-thing-model} shows a generic \ac{TM}~\cite{wot-td} that can be used to implement a valid \ac{DTD}. The \ac{DTD} must include:
\begin{itemize}
    \item the \ac{PA} identifier, 
    \item a link to the \ac{DTKG},
    \item an \texttt{observeallproperties} affordance to subscribe to updates of the \ac{DTKG}.
\end{itemize}

\lstinputlisting[
    label={lst:dtd-thing-model},
    caption={The Thing Model that Thing Descriptions must
    implement to be recognized as a valid \acl{DTD}.},
]{listings/hwodt/dtd.jsonld}


% \begin{figure}
%   \centering
%   \includegraphics[width=\columnwidth]{figures/hwodt/wot-dt-mashups.pdf}
%   \caption{Keeping Digital Twin representations aligned with the \ac{WoT} Thing Description enables the creation of mixed mashups and interoperability with existing \ac{WoT} consumers.}
%   \label{fig:wot-dt-mashups}
% \end{figure}

The alignment with the \ac{WoT} is strategic for the \ac{DT} community as reusing the existing standard ensures compatibility and favors the development of application mashups.
%
The \ac{DTD} can be served by the \ac{DI} of a \ac{DT} to be discovered and consumed by existing \ac{WoT} clients (see \Cref{sec:dte:engineering-dt:physical-digital-adapters}).
%
Clients that have the capability to interpret the \ac{WoDT} vocabulary can then exploit the additional metadata to interact with the \ac{DT} as part of a \ac{HWoDT} ecosystem.% as shown in \Cref{fig:wot-dt-mashups}.

%-----------------------------
\subsection{HWoDT Adapters}
\label{ssec:adapters}
%------------------------------

\acp{DT} in a \ac{HWoDT} ecosystem must all adhere to the uniform interface, regardless of the technology used to implement them.
%
Adapting existing \ac{DT} technologies to the \ac{HWoDT} interface requires aligning data and interaction patterns.
%
To show that this alignment is achievable with configurable reusable components a set of \emph{adapters} is developed to integrate some mainstream technologies within a \ac{HWoDT} ecosystem.
%
All adapters support HTTP interactions and WebSocket-based \ac{DTKG} observation.
%
The abstract architecture followed by all adapters is shown in \Cref{fig:abstract_arch}, bottom.

%..............................................
\subsubsection{\azureTwin{} Adapter}
%..............................................

\azureTwin{} is Microsoft's domain-independent \ac{PaaS} \ac{DT} solution, supporting the management of multiple \acp{DT} connected within a \emph{twin graph}.

Creating \acp{DT} in \azureTwin{} requires defining their model using the \emph{\acf{DTDL}}, a custom JSON-LD format to specify properties, relationships, commands (actions) and telemetry (events) that describe a \emph{type} of \ac{DT}.
%
\ac{DTDL} models can then be used to create \ac{DT} instances.
%
Although the model closely aligns with the \ac{WoDT} model, the support of events and actions is partial\footnote{As of June 2025, commands can be defined but not invoked automatically, while telemetries are not used within \azureTwin{} \url{https://learn.microsoft.com/en-us/azure/digital-twins/concepts-models}} and relationships are limited to linking \acp{DT} within the same \azureTwin{} instance, which hence defines a closed homogeneous ecosystem.

The \azureTwin{} adapter is implemented as a middleware, connecting to an \azureTwin{} instance and mapping \acp{DT} to the \ac{HWoDT} uniform interface.
%
The adapter can be configured to select which \acp{DT} needs to be mirrored and specify the mapping from \ac{DTD} properties and relationships to produce the \ac{DTKG}. 
%
\Cref{fig:azure-adapter-c&c} shows the adapter architecture and the necessary components to connect to an \azureTwin{} instance.
%
The following Azure service pipeline must be set up to link the \azureTwin{} instance to the adapter:
\begin{itemize}
    \item \textit{Azure Event Grid} to capture and forward \azureTwin{} events;
    \item \textit{Azure Function} (\acl{FaaS}) to fetch the current \ac{DT} state and send it to the adapter via SignalR on every new event;
    \item \textit{Azure SignalR} to deliver \acp{DT} state updates to the adapter.
\end{itemize}

The adapter can be deployed either within the Azure cloud or is designed to automatically retrieve the \ac{DTDL} models, stored on \azureTwin{}, and convert them in valid \acp{DTD} for each \ac{DT} instance.
The adapter waits for SignalR events to receive \ac{DT} state updates generated by the Azure Function and convert them into \acp{DTKG} updates.

\begin{figure}[tb]
    \centering
    \includegraphics[width=\textwidth]{figures/hwodt/adtadapter-c&c.pdf}
    \caption{Main components of the \azureTwin{} adapter, implemented as a standalone middleware that maps specific instances of \acp{DT} hosted on an \azureTwin{} instance.}
    \label{fig:azure-adapter-c&c}
\end{figure}

%..............................................
\subsubsection{Eclipse Ditto Adapter}
%..............................................

\emph{Eclipse Ditto}, is an open-source \ac{DT} platform from the Eclipse Foundation. 
It abstracts each \ac{PA} as a \emph{Ditto Thing} and offers a Web-based layer for interacting with \ac{IoT} devices through their \acp{DT}.
%
A Ditto instance can manage multiple \acp{DT}, using a metamodel with:
\begin{itemize}
    \item \emph{Attributes} for static metadata,
    \item \emph{Features} which can group data (properties) and functionalities (messages).
\end{itemize}
Although lacking native support for relationships, actions, and events, these can be modeled using attributes (for links), consumer-to-\ac{DT} messages (for actions), and \ac{DT}-to-consumer messages (for events). Models can be defined via a custom JSON format or a (set of) \ac{WoT} \ac{TM}.

Eclipse Ditto is implemented with a microservice architecture. 
Despite Ditto being open-source and allowing the development of custom extensions, the prototype adapter is implemented as a custom external middleware that can be deployed to map one Ditto Thing to the \ac{HWoDT} uniform interface.
%
The middleware leverages Eclipse Ditto's native WebSocket interface to retrieve data and performs two key transformations: converting the \ac{WoT} \ac{TD} exposed by Ditto into a \ac{DTD}, and serializing \ac{DT} data into a \ac{DTKG}.
This process relies on a configurable mapping between Ditto features and their corresponding \ac{RDF} representations.

\begin{figure}[tb]
  \centering
  \includegraphics[width=0.8\columnwidth]{figures/hwodt/ditto-adapter-c&c.pdf}
  \caption{Main components of the Eclipse Ditto adapter, implemented as a standalone middleware that maps a specific instance of a \ac{DT} hosted on the Ditto platform.}
  \label{fig:ditto-adapter-c&c}
\end{figure}

%..............................................
\subsubsection{\acl{WLDT} Adapter}
%..............................................

The \emph{\acf{WLDT} framework} (\Cref{sec:dte:engineering-dt:wldt-framework}) enables the development of \acp{DT} as standalone software components deployable across cloud or edge environments.
%
Specifically, the adapter is implemented as a \ac{DiA}, used in the \ac{WLDT} architecture to represent digital interfaces through which the \ac{DT} can expose data for consumers.
%
The framework internal metamodel is already aligned with the \ac{HWoDT}, so no additional effort is required to map concepts.
The adapter is provided as a reusable Java library, which \ac{WLDT} developers can easily import into their projects and then configure the mapping towards the \ac{HWoDT} uniform interface leveraging the implementation of the necessary \ac{API} to manage the \ac{DTD} and \ac{DTKG}.

\begin{figure}[tb]
  \centering
  \includegraphics[width=\textwidth]{figures/hwodt/wldt-adapter-c&c.pdf}
  \caption{Main components of the \ac{WLDT} adapter, implemented as a \acl{DiA} and illustrating its integration with the other components of the \ac{WLDT} framework.}
  \label{fig:wldt-adapter-c&c}
\end{figure}


%..............................................
\subsubsection{Implementing Custom Adapters}
%..............................................
The description of the adapters implemented in the prototype \ac{HWoDT} framework should be useful for any \ac{DT} developer wishing to implement a custom adapter for their own \ac{DT} or \ac{DT} technology. 
%
The idea of the \ac{HWoDT} is grounded on the fact that implementing such custom adapters is relatively straightforward and that the little effort spent in developing (or even less in configuring) them can bring benefits in the integration with the \ac{HWoDT} ecosystem.

To summarize, the steps to develop a custom adapter are: 
\begin{enumerate}
    \item understand how to map the concept of the original \ac{DT} model into the \ac{WoDT} metamodel;
    \item understand how to represent the state of the \ac{DT} with an evolving semantic representation for the \ac{DTKG};
    \item implement a module that can reactively produce the \ac{DTKG} whenever the \ac{DT} state is updated;
    \item implement a module that can serve the \ac{DTD} over HTTP, alongside the mandatory \ac{API} for \ac{DTKG} observation.
\end{enumerate}

%-----------------------------------
\subsection{The WoDT Platform}
%-----------------------------------

\begin{figure}[ht]
  \centering
  \includegraphics[width=0.85\columnwidth]{figures/hwodt/platform-c&c.pdf}
  \caption{\ac{WoDT} Platform modules and interfaces, represented using components and connectors.}
  \label{fig:platform-c&c}
\end{figure}

A prototype of a \ac{WoDT} Platform is implemented in Kotlin.
The platform implements the modules of the abstract architecture shown in \Cref{fig:abstract_arch}, top as shown in \Cref{fig:platform-c&c}.
%
Namely, the platform offers multiple interfaces for consumers: an HTTP \ac{API} for \ac{DTE} management (Ecosystem Management Interface) and one for \ac{KG} access with a SPARQL endpoint for read-only queries, as well as a WebSocket endpoint to observe ecosystem updates (\ac{WoDT} Platform Interface).

The platform can process the \ac{WoT}-based \ac{DTD} described above to register \acp{DT}.
When a registration requested is submitted, the platform:
\begin{enumerate}[label=\textbf{Step \arabic*}, leftmargin=5.3em]
    \item locates the \ac{DTKG} observation form (\texttt{observeallproperties}) and starts observing the \ac{DT} for updates;\label{step:observe-dtkg}
    \item notifies the \ac{DT} of successful registration to let it update its \ac{DTD} with the platform URI;\label{step:notification}
    \item maps the \ac{DT} \ac{URI} to a local cache URL;
    \item observes \ac{DTKG} updates and merges them into the \ac{DTE} \ac{KG} stored in memory with Apache Jena.
\end{enumerate}

%
The current prototype supports the observation of \ac{DTKG} through WebSockets for \ref{step:observe-dtkg} and implements \ref{step:notification} sending a request to a hardcoded \texttt{/platform} HTTP endpoint on the \ac{DT}.

Consumers can interact with the \acp{DTE} through the \ac{WoDT} platform
either through (possibly repeated) SPARQL queries to retrieve the information they need or by observing the whole \ac{KG} through WebSockets.
%
In the prototype, all observers receive the whole \ac{KG} whenever there is an update so that consumers don't need to have specific update handling logic.
%

%=======================================
\section{Comparison with Related Works}
\label{sec:dte:hwodt:related}
%=======================================

This section compares the \ac{HWoDT} proposal with related approaches that target the integration of \acp{DT} in ecosystems. 
%
The aim of this comparison is to highlight the similarities and differences with existing solutions, discussing advantages and limitations of existing approaches with respect to the \ac{HWoDT}.

The \ac{HWoDT} proposal is not meant to compete with existing standards or framework, but rather to either complement them or provide an alternative approach to \ac{DT} interoperability.
%
The main principle of the \ac{HWoDT} is to promote interoperability through the adoption of \ac{REST} principles and Semantic Web technologies, given their proven effectiveness in enabling integration across heterogeneous systems on the Web.


%----------------------------------------------------
\subsection{HWoDT and Digital Twin Standards}
%----------------------------------------------------

The \ac{HWoDT} tackles the relevant issue of enabling \ac{DT} interoperability targeting the creation of \emph{heterogeneous \acp{DTE}}.
%
This is an open challenge in the \ac{DT} research community (see \Cref{sec:back:dt:interoperability}), and several interoperability frameworks are being proposed to streamline the integration of \acp{DT}~\cite{Barnard_2024}.
%
Among the most relevant standards are \ac{OPC-UA}, \ac{AAS}, \ac{AML}, and the \ac{W3C} \ac{WoT}. \Cref{tab:interop_comparison} summarizes a comparison of these standards across selected aspects.

\begin{table*}
    \centering
    \small
    \setlength{\tabcolsep}{3pt}
    \renewcommand{\arraystretch}{1.3}
   \begin{tabular}{>{\raggedright\arraybackslash}p{2cm}|>{\raggedright\arraybackslash}p{2.2cm}|>{\raggedright\arraybackslash}p{2.2cm}|>{\raggedright\arraybackslash}p{2.2cm}|>{\raggedright\arraybackslash}p{2.2cm}|>{\raggedright\arraybackslash}p{2.2cm}}
    \toprule
    \midrule
    \textbf{} & \textbf{AAS} & \textbf{OPC-UA} & \textbf{AML} & \textbf{WoT} & \textbf{Semantic Web} \\
    \hline
    \hline
    \textbf{Scope} &
    Asset digital representation &
    Device data / \ac{M2M} &
    Tool interoperability &
    Web-scale access &
    Cross-domain knowledge \\
    \hline
    \textbf{Data model} &
    Submodels + semantic IDs &
    Hierarchical node graph (address space) &
    Hierarchies (CAEX, CAD, PLCopen) &
    Thing Description (JSON-LD) &
    Triple Graphs (RDF / OWL) \\
    \hline
    \textbf{Semantics} &
    Structured submodels, semantic references &
    (Sub)Types and Relationships &
    Role-based, structural  &
    JSON-LD semantics, ontology-aligned &
    General-purpose ontologies \\
    \hline
    \textbf{Querying and Data access} &
    REST API &
    Browse address space &
    File access &
    SPARQL (if RDF-mapped) &
    SPARQL / Web browsing \\
    \hline
    \bottomrule
    \end{tabular}
    \caption{Comparison of interoperability frameworks across selected aspects.}
    \label{tab:interop_comparison}
\end{table*}

The comparison highlights how existing interoperability frameworks address complementary layers of \ac{DT} integration. 
\ac{AAS} focuses on structured digital representations of assets through modular submodels,
\ac{OPC-UA} provides a secure communication infrastructure centered on hierarchical address spaces for device-level data exchange,
and \ac{AML} supports interoperability among engineering tools via structured XML-based hierarchies. 
%
The \ac{W3C} \ac{WoT} promotes Web-scale integration by describing devices through \acp{TD},
while Semantic Web technologies provide a general-purpose, ontology-driven approach to cross-domain knowledge representation based on graph models and query languages such as SPARQL. 
Together, these standards span different scopes, data models, semantic mechanisms, and data access paradigms, reflecting the multi-layered nature of \ac{DT} interoperability.

Given their different nature, these standards are better viewed as complementary rather than competing. 
Integration efforts already aim to leverage their respective strengths:
\ac{OPC-UA} has been integrated with Web technologies~\cite{DBLP:journals/csi/CavalieriSS19},
operations in \ac{AAS}~\cite{platform_i40_aas_part1_v2} and affordances in \ac{WoT}\footnote{\url{https://profiles.opcfoundation.org/workinggroup/97}} can have \ac{OPC-UA} protocol bindings,
and \ac{AML} specifications can be linked to \ac{AAS} for a coherent view of assets across engineering and operational layers~\cite{DBLP:conf/etfa/DrathRH19,DBLP:conf/indin/WengerZ018}. 
In this landscape, Semantic Web technologies -- as adopted in the \ac{HWoDT} -- can be layered on top of existing standards to complement their capabilities.

The Semantic Web excels at heterogeneous knowledge integration under a uniform interface (\Cref{sec:back:web:semantic-web-technologies}),
enabling expressive queries and ontological reasoning across domains. 
Alignments between Semantic Web technologies and industrial standards have therefore been investigated,
highlighting similarities between, e.g., \ac{OPC-UA}~\cite{DBLP:conf/etfa/MajumderWD19,DBLP:conf/etfa/PerzyloP0K19}
and \ac{AAS}~\cite{DBLP:conf/icphys/BedenCB21, platform_i40_aas_part1_v2} data models,
in order to benefit from graph-based semantics and reasoning capabilities.

Following this trend, the \ac{HWoDT} proposes a hypermedia layer that integrates existing \acp{DT}, regardless of whether they are implemented using industrial standards. 
Since most interoperability standards emerged from the Industry~4.0 movement and primarily target industrial domains,
they leave a gap when modeling entities and concepts across heterogeneous domains. 
The \ac{HWoDT} addresses this limitation by relying on Web ontologies that span a wide variety of application areas and can be seamlessly combined within a unified \ac{KG}.

Providing a synchronized representation of the asset state is a defining feature of \acp{DT}. 
The \ac{HWoDT}, designed from a \ac{DT}-centric perspective, requires each \ac{DT} to continuously produce and update a representation of its observable state in the \ac{DTKG}. 
This enables consumers to query an up-to-date view of the entire ecosystem and observe state changes. 
Although similar synchronization can be implemented by \ac{AAS} servers (e.g., Eclipse BaSyx\footnote{\url{https://eclipse.dev/basyx/}}) retrieving data from \ac{OPC-UA} endpoints,
such approaches remain limited by the expressiveness of the underlying APIs and the lack of hypermedia-driven navigation.
%
Trends in the \ac{DT} engineering community show that service-oriented and micro-service architectures are becoming increasingly common in \ac{DT} implementations~\cite{ferko2022architecting},
making the \ac{HWoDT} a natural fit for these modern architectural patterns.
%
Web-based approaches describing \acp{API} with ontologies are emerging,
but they are often limited to specific domains and use cases (e.g. \cite{Liu_Jiang_Jiang_2020}),
and not yet adopted as a general solution for \ac{DT} interoperability as proposed in this thesis.

Leveraging the \ac{HWoDT}, developers can focus on application logic while abstracting away the complexity of heterogeneous \ac{DT} integration. 
This yields advantages similar to those promoted by the \ac{WoT} approach:
\begin{inlinelist}
    \item the application layer remains stable and unaffected by the introduction of new \acp{DT};
    and
    \item the \ac{DT} layer can evolve or replace underlying implementations without impacting upper layers, as long as the exposed interface is preserved.
\end{inlinelist}

The \ac{WoT} is a source of inspiration for the \ac{HWoDT} and the proposal in this thesis aims to extend the \ac{WoT} principles to the specific requirements of \acp{DT} and their ecosystems.
%
Related approaches also exploit the \ac{WoT} in the context of \acp{DT} with similar goals. 
%
A semantic extension of the \ac{WoT} ontology is presented in \cite{González-Gerpe_Cimmino_Bernardos_Poveda-Villalón_García-Castro} proposing to use \acp{TD} to integrate \acp{DT} in the construction domain,
extending it to capture the five-dimensional model of \acp{DT}~\cite{qi2021enablingtechdt}.
%
The \ac{WoT} is also the foundation of WoTwins~\cite{SciulloWoTwins2022} a framework to generate automatically \acp{DT} starting from existing \ac{WoT} things, modeling their behavior and enabling prediction features.
%
These works highlight the relevance of the \ac{WoT} as a standard for the future of \ac{DT} applications, despite its limitations in capturing fully the nature of a \ac{DT} in its entirety which may require extensions and development of custom ontologies aligned with the \ac{WoT} model.

A fundamental difference with the (semantic) \ac{WoT} compared to \ac{DTE} that this thesis exposes, however, lies in the seamless browsing of the \ac{DTE} through a \ac{KG} that explicitly captures the observable state of \acp{DT}.
%
In a W3C \ac{WoT} application, even if \acp{TD} were semantically annotated and stored in a \ac{KG},
selecting \emph{things} based on their current state would require issuing requests to retrieve the value of each property of each thing. 
The \ac{WoT} does not natively address the \ac{DT}-specific requirement of continuously shadowing the asset state,
nor does it specify how to manage dynamic relationships among things,
limiting the expressiveness of cross-asset queries.

The \ac{HWoDT} leverages the intrinsic synchronization capability of \acp{DT} through the \ac{DTKG},
simplifying interaction and enabling direct, state-aware navigation. 
Without such a unifying abstraction, consumers interacting with heterogeneous \acp{DT} would need to individually retrieve, interpret, and merge their state representations to resolve a query (\Cref{fig:comparison-custom-vs-hwodt}). 

\begin{figure}[tb]
  \centering
  \includegraphics[width=\columnwidth]{figures/hwodt/comparison_custom_hwodt.pdf}
  \caption{Comparison of the steps required to perform a ``query'' across heterogeneous \acp{DT} versus with the \ac{HWoDT} approach, which abstracts heterogeneity through a uniform interface.}
  \label{fig:comparison-custom-vs-hwodt}
\end{figure}

Overall, the \ac{HWoDT} is compatible with and complementary to existing \ac{DT} interoperability efforts, positioning itself as an additional semantic and hypermedia layer that integrates \acp{DT} implemented with—or without—industrial standards, supporting:
\begin{itemize}
    \item integration with \acp{DT} beyond the industrial domain,
    \item advanced semantic querying with reasoning,
    \item Web-based navigation and direct access to up-to-date asset representations,
    and
    \item subscription to changes in the \ac{DT} state.
\end{itemize}



%----------------------------------------------------
\subsection{HWoDT in the Landscape of DT Platforms}
%----------------------------------------------------

The \ac{HWoDT} approach offers a solution to implement open \acp{DTE} on top of heterogeneous \ac{DT} technologies.
This contrasts with other \ac{DT} platforms, which typically support homogeneous \acp{DTE} and allow multiple \acp{DT} to be defined within the same instance, but constrain all of them to specific technological choices.

To frame the positioning of \ac{HWoDT} within the broader \ac{DT} ecosystem, \Cref{tab:dt-platform-comparison} compares a selection of representative platforms among refernece \ac{DT} technologies (\Cref{sec:back:dt:technology}) that support the construction of \acp{DTE} along key dimensions.


%\begin{landscape}
%\begin{table}[bp]
\begin{sidewaystable}[p]
\centering
\caption{Comparison of Digital Twin Ecosystem Platforms Along Key Architectural Dimensions}
\label{tab:dt-platform-comparison}
\renewcommand{\arraystretch}{1.3}
\footnotesize
\begin{tabularx}{\linewidth}{
    >{\raggedright\arraybackslash}p{3cm}|
    >{\raggedright\arraybackslash}X|
    >{\raggedright\arraybackslash}X|
    >{\raggedright\arraybackslash}X|
    >{\raggedright\arraybackslash}X|
    >{\raggedright\arraybackslash}X||
    >{\raggedright\arraybackslash}X
    }
\toprule
\midrule
\textbf{Comparison Dimension} &
\textbf{Azure Digital Twins} &
\textbf{Eclipse Ditto} &
\textbf{WLDT} \cite{PICONE2021100661}&
\textbf{DT-as-a-Service} \cite{Talasila_Gomes_Mikkelsen_Arboleda_Kamburjan_Larsen_2023}&
\textbf{TwinBase} \cite{Autiosalo_Siegel_Tammi_2021} &
\textbf{HWoDT Platform} \\

\hline
\hline

\textbf{Primary Role} &
Registry &
Registry &
Runtime &
Runtime &
Registry &
Registry \\
\hline

\textbf{Deployment} &
Cloud (PaaS) &
Microservices &
Containerized &
Microservices &
Git-based &
Containerized\\
\hline

\textbf{Governance} &
Centralized &
Centralized &
Centralized &
Centralized &
Decentralized &
Both \\
\hline

\textbf{DT Distribution} &
Distributed &
Distributed &
Instance &
Instance &
Distributed &
Distributed \\
\hline

\textbf{Platform Coupling} &
Aware &
Aware &
Bound &
Bound &
Aware &
Independent \\
\hline

\textbf{DT Representation} &
Custom (DTDL) &
Standard (WoT) &
Any  &
Any (Service-defined)&
Custom (DT Document) &
RDF (DTD + DTKG) \\
\hline

\textbf{Synchronization Management} &
External (Azure Services)&
External (IoT middleware)&
Internal (Shadowing) &
Internal (Service Orchestration)&
External (Git) &
Internal (DTKG Observation) \\
\hline

\textbf{DT Relationships} &
Explicit  &
Implicit (Attributes)&
Explicit &
Explicit &
Explicit &
Explicit \\
\hline

\textbf{Data Retrieval} &
Query (Custom Language) &
Query (Resource Query Language) &
Any (Adapters) &
Any (Service-defined)&
API &
Query (SPARQL) \\
\hline

\bottomrule
\end{tabularx}
\end{sidewaystable}
%\end{table}
%\end{landscape}


These comparison dimensions adopted are chosen to highlight differences between the different approaches, both in terms of design purpose, structural and operational characteristics, which are critical for analyzing how platforms support the construction of \acp{DTE}. The main comparison dimensions are:
%
\begin{itemize}
    \item \textbf{Primary Role}: indicates whether the platform functions primarily as a \emph{registry} or a \emph{runtime} for \acp{DT}.
    \item \textbf{Deployment}: the technological and operational model used to deploy the platform itself.
    \item \textbf{Governance}: whether the platform adopts a centralized or decentralized management of \acp{DT}. Centralized governance typically implies that \acp{DT} are created and managed within the platform, while decentralized governance allows for independently created \acp{DT} to be registered and integrated.
    \item \textbf{DT Distribution}: the approach used to deploy \ac{DT} instances across the system. Namely, this dimension distinguishes between platforms that require \ac{DT} instances to be deployed within the platform itself (instance-based) and platforms that allow \ac{DT} instances to be distributed and managed independently, with the platform serving as an integration layer.
    \item \textbf{Platform Coupling}: whether \acp{DT} exist only within the scope of the platform (bound), must be aware of being part of the platform (aware) or can be completely platform independent, regardless of the deployment model. This dimension is critical to understand the level of openness and flexibility in integrating \acp{DT} from different sources.
    \item \textbf{DT Representation}: the supported representation format used to describe and catalog \acp{DT} within the scope of a platform.
    \item \textbf{Synchronization Management}: whether and how \ac{DT} state management is handled by the platform or must be implemented externally. 
    \item \textbf{DT Relationships}: whether relationships between \acp{DT} are explicitly modeled or implicit.
    \item \textbf{Data Retrieval}: the mechanisms provided for querying or accessing \ac{DT} data.
\end{itemize}



The selection is not meant to be an exhaustive collection of \ac{DT} development platforms for which we refer to other surveys~\cite{gil2024spe,9640612,Mihai_survey_enabling_2022},
but rather a representative sample of the state of the art,
focusing on platforms that may support the construction and management of multiple \acp{DT}.
%
Accordingly, the comparison includes the following platforms analyzed as follows: 

\paragraph{Azure Digital Twins\protect\footnote{\url{https://azure.microsoft.com/en-us/services/digital-twins/}}} is a cloud-based PaaS solution that supports the definition of multiple interconnected \acp{DT} instances with an explicit notion of relationships between them. \azureTwin{} is selected as a representative of commercial cloud platforms. A similar general-purpose platform is AWS IoT TwinMaker\footnote{\url{https://aws.amazon.com/iot-twinmaker/}}, or other industry-specific platforms such as Siemens Insights Hub\footnote{\url{https://plm.sw.siemens.com/en-US/insights-hub/}}, Bentley iTwin\footnote{\url{https://www.bentley.com/en/products/brands/itwin}}, and PTC ThingWorx\footnote{\url{https://www.ptc.com/en/products/thingworx}}. 
%
Azure Digital Twins functions primarily as a registry of \acp{DT}, which explains its strong support for cataloging multiple \acp{DT} and managing explicit relationships.
Its cloud PaaS deployment ensures distributed availability,
while centralized governance guarantees full control over \ac{DT} creation and lifecycle. 
\ac{DT} instances are platform-aware, meaning they rely on Azure-specific constructs,
and Azure's custom \acf{DTDL} is used for representation to support complex modeling, though at the cost of cross-platform interoperability.
Synchronization generally relies on external Azure services, and data retrieval uses a dedicated query language optimized for the platform.

\paragraph{Eclipse Ditto\protect\footnote{\url{https://www.eclipse.org/ditto/}}} is an open-source microservices-based registry for \ac{IoT} \acp{DT}. Ditto is selected as a representative of open-source platforms that integrate with existing \ac{IoT} ecosystems. FIWARE~\cite{8950963} is another similar platform that has been used in the \ac{DT} context~\cite{9346030}, although more focused on data management and integration rather than \ac{DT} modeling and lifecycle management.
%
Ditto's role as a registry reflects its focus on managing \ac{DT} metadata rather than executing their behavior.
Ditto is implemented as a microservice application that can be deployed in various environments, allowing integration into diverse \ac{IoT} infrastructures.
Governance is centralized within the Ditto instance, while \acp{DT} can be deployed as distributed components implementing the  platform-aware synchronization process through \ac{IoT} middlewares.
Representations use the custom  \emph{Ditto thing} model, but can also expose \ac{WoT} \acp{TD} for standard compliance, \ac{DT} relationships are implicit, inferred from attribute structures.
Data retrieval is supported through the Resource Query Language~\footnote{Resource Query Language Project: \url{https://github.com/persvr/rql}}.


\paragraph{\acl{WLDT}}~\cite{PICONE2021100661} is a research-oriented framework for developing \acp{DT} as standalone software components. \ac{WLDT} is selected as a representative of research prototypes which explores the ability to deploy \acp{DT} in a variety of infrastructures and here is considered in its ability to run multiple \acp{DT} instances within its multi-threaded runtime (see \Cref{sec:dte:engineering-dt:wldt-framework}). Here it is compared to the \ac{HWoDT} to highlight the complementarity of two contributions of this thesis, with \ac{WLDT} providing a flexible runtime for \ac{DT} execution and \ac{HWoDT} offering a unifying layer for heterogeneous \ac{DT} integration and ecosystem management.
%
WLDT serves primarily as a runtime for executing \acp{DT},
deployed in containerized environments for flexible infrastructure support.
Governance is centralized, as \ac{DT} instances are bound to the runtime, unable to operate independently.
The framework allows any representation format, facilitating experimental setups through the modular digital adapters introduced in \Cref{sec:dte:engineering-dt:physical-digital-adapters}.
Synchronization is handled internally through the shadowing process,
relationships are explicitly defined although manually handled by developers,
and data access is adaptable via custom adapters, reflecting its research-oriented flexibility.

\paragraph{DT-as-a-Service Platform (DTaaS)}~\cite{Talasila_Gomes_Mikkelsen_Arboleda_Kamburjan_Larsen_2023} is a research-oriented platform with service-level orchestration to manage the lifecycle of multiple \acp{DT} instances. DTaaS is selected as a representative of research prototypes which explores the ability to orchestrate and combine services to implement and run \acp{DT} instances. A similar approach is taken by the OpenTwins platform~\cite{robles2023cii} which extends Ditto with a composition of additional services.
%
DTaaS operates as a runtime platform orchestrating \acp{DT} as services and supporting both the development and execution of \ac{DT} models e.g., through co-simulation services~\cite{7496424}.
Its microservice deployment supports flexible service composition, while governance remains centralized to control service-based DT lifecycles.
\ac{DT} instances are bound to the service runtime, and representation is service-defined, allowing custom but platform-specific models.
Synchronization occurs internally through orchestration, relationships are explicitly modeled in service definitions, and data retrieval is determined by implemented service APIs.

\paragraph{TwinBase}~\cite{Autiosalo_Siegel_Tammi_2021} is a Git-based registry promoting Web standards and interoperability. TwinBase is selected as a representative of research efforts that support the management of multiple \acp{DT} with a decentralized approach to governance following the idea of a \emph{Digital Twin Web} that is close to the vision pursued in this thesis.
%
TwinBase's design emphasizes registry functionality with decentralized governance,
allowing independently created \acp{DT} to be registered and integrated.
Its Git-based deployment supports distributed \acp{DT} that must be aware of the platform to update their representation.
\ac{DT} representation uses custom \ac{DT} documents (currently as YAML documents), synchronization relies on Git versioning, and relationships can be explicitly defined linking \acp{DT} within the platform.
Data access is provided via APIs, reflecting the platform's focus on openness, interoperability, and adherence to web standards, but limiting complex interactions and query capabilities, reflecting the more static nature of the platform compared to the other approaches.

\paragraph{HWoDT Platform} 
The HWoDT platform is the approach proposed in this thesis to implement hypermedia-based \acp{DTE} on top of heterogeneous \ac{DT} technologies.
%
The HWoDT platform functions primarily as a registry of \acp{DT}, supporting the management of multiple \acp{DT} instances and their relationships within a unified ecosystem.
It is deployed in containerized environments, which allows flexible distribution across heterogeneous infrastructures.
Governance can be managed as centralized to limit the ability to register \ac{DT} instances or decentralized to allow more flexible participation of \acp{DT} in the ecosystem.
Regardless of the governance model, \acp{DT} themselves are fully independent, meaning they can exist and operate outside the platform's direct control as long as they adhere to the uniform interface, which can be implemented as an external adapter as demonstrated in \Cref{sec:hwodt-impl}.
The only platform-aware behavior required from \acp{DT} is to expose the \ac{URI} of the platform in their \ac{DTD} to enable discoverability of ecosystems the \ac{DT} is part of. 
HWoDT uses RDF-based representations combining DTD and DTKG, supporting semantic interoperability and explicit modeling of relationships between \acp{DT}.
%
Synchronization is managed internally through the DTKG observation mechanism which ensures that the platform maintains an up-to-date representation of the state of all registered \acp{DT}.
This inversion of control compared to other platforms, where the platform actively retrieves updates from \acp{DT}, allows for the integration of independently developed \acp{DT} and simplifies the synchronization process.
%
Data retrieval is performed via SPARQL queries, enabling rich semantic access.

Compared to the other platforms, this positions HWoDT as a bridge between centralized commercial clouds like Azure Digital Twins, open-source registries like Ditto, research runtimes like WLDT and DTaaS, and decentralized approaches like TwinBase. It combines their strengths -- support for multiple DTs, cross-platform relationships, semantic expressiveness, and operational flexibility -- while overcoming typical limitations such as platform lock-in, constrained representation formats, and lack of independent DT deployment. In the broader DT ecosystem, HWoDT thus occupies a unique position as a heterogeneous, open, and interoperable platform, capable of supporting both experimental research and operational deployments across diverse infrastructures.


%==========================================
\section{Prototype Performance Evaluation}
%==========================================

A performance evaluation of the prototype is carried out to quantify the performance implications introduced by the additional layer introduced by the \ac{HWoDT} to implement \acp{DTE}.
%
\Cref{fig:latency-hwodt} schematically shows the communication between components in a \ac{HWoDT}-based system. \circled{A} is the latency between \ac{PA} and \ac{DT}, \circled{B} is the latency between the \ac{DT} and the \ac{HWoDT} adapter, \circled{C} is the latency between the adapter and the platform, while \circled{D} is the latency between the platform and the client. In a scenario where the DT is used without the platform \circled{E} would be the latency between the DT and the client. This shows that the additional potential latency loss in a \ac{HWoDT} system is given by \circled{B}+\circled{C}.

\begin{figure}[tb]
  \centering
  \includegraphics[width=0.8\columnwidth]{figures/hwodt/HWoDT-latency.pdf}
  \caption{Latency in an HWoDT-based system. From left, to right, the \ac{PA}, the \ac{DT}, the \ac{HWoDT} adapter, the \ac{WoDT} platform and the client. Each connection between components (labelled with letters) may introduce latency.}
  \label{fig:latency-hwodt}
\end{figure}

Accordingly, the following evaluation assesses the performance of the \ac{HWoDT} platform prototype, thereby characterizing the overhead incurred when integrated atop existing interoperability standards.
Even though performance optimization was not a primary focus in the development of the \ac{HWoDT} platform prototype, it can still be useful to make some considerations on the performance of the \ac{HWoDT} approach.
%
To do so an experimental setup is used to measure the latency \circled{B}+\circled{C}+\circled{D} when interacting with the platform and compare it with \circled{E}.

%-----------------------------------
\subsection{Experimental Setup}
%-----------------------------------

The experiment is designed to stress the performance of the platform in a resource-intensive scenario, and measure the delay perceived by consumers wishing to interact with \acp{DT} and the ecosystem as a whole.
%
A synthetic workload is used because---differently from a real-world \ac{IoT} dataset which may include data spikes over time---the scenario allows us to have a fully controllable environment to scale the traffic and evaluate the response of the platform under different loads.

A \ac{DTE} of a network of temperature sensors is implemented, with \acp{DT} reporting an update every second using \acp{DT} implemented with the \ac{WLDT} framework, running within the same process.
%
Each \ac{DT} generates a random temperature value between 0 and 100 every second, with a random initial offset of up to one second to avoid perfect synchronization of the \acp{DT}' data streams. The \ac{DT} state includes a timestamp marking when the state was computed by the \acp{DT}.
%
The different interaction patterns of the \ac{DTE} are tested:
\begin{itemize}
    \item with clients \emph{observing} all the \acp{DT} receiving all the \acp{DT} state notifications;
    \item with clients periodically \emph{querying} the \ac{DTE} to retrieve all sensors that have a reported temperature greater than 50. 
\end{itemize}
%
The key metrics collected are the \emph{freshness} of the information, which is computed as the difference between the time a state notification is received and the timestamp of the message (or the greatest timestamp when observing the \ac{DTE} \ac{KG}).
%
Additionally, the time taken to perform a query on the ecosystem retrieving the state of all \acp{DT} matching a condition is measured.

The experiments have been carried out running the \acp{DT} the \ac{WoDT} platform and the client applications on the same machine equipped with a 13th Gen Intel(R) Core(TM) i7-13700H CPU and 32 GB of RAM, using the OpenJDK 21.0.7 runtime.
%
Data is collected by analyzing logs of the client applications.

All \acp{DT} have been implemented with the \ac{WLDT} framework. 
The framework supports defining \ac{DT} implementations and uses a plugin-based architecture to expose different interfaces. 
This has been useful to implement different interaction patterns for the same \ac{DT}.

Measurements are repeated with 50, 100 and 200 \acp{DT}, and performing operations with 1, 50, 100 clients each observing all \acp{DT} and querying the entire \ac{DTE}.


%-----------------------------------
\subsection{Results}
%-----------------------------------

This section briefly reports results of the performance evaluation focusing on the different interaction patterns of the \ac{WoDT} platform prototype and comparing them with baseline direct interactions with individual \acp{DT}.
%
The results are summarized in \Cref{fig:results-performance}, showing two bar plots reporting the average values of the two metrics collected in the experiments.
%
Results confirm that the overhead introduced by the \ac{HWoDT} platform is not negligible, but still acceptable for many \ac{DT} applications, especially when considering the benefits of having a uniform interface to interact with heterogeneous \acp{DT}, especially when considering the ability to query the whole \ac{DTE} \ac{KG}.

\begin{figure}[tb]
    \centering
    \begin{subfigure}[t]{0.49\textwidth}
        \centering
        \includegraphics[width=\textwidth]{figures/hwodt/mean_latency_barplot.pdf}
        \caption{}
        \label{fig:observation-delay}
    \end{subfigure}
    \hfill
    \begin{subfigure}[t]{0.49\textwidth}
        \centering
        \includegraphics[width=\textwidth]{figures/hwodt/mean_request_time_barplot.pdf}
        \caption{}
        \label{fig:query-time}
    \end{subfigure}

    \caption{Performance indicators with different loads of \acp{DT} and clients working on the ecosystem: (a) average time difference when observing \acp{DT} either directly or through the \ac{WoDT} platform, and (b) average time per operation when querying the DT ecosystem either through the \ac{WoDT} SPARQL endpoint or directly retrieving the state from each \ac{DT} API.}
    \label{fig:results-performance}
\end{figure}

%...................................
\subsubsection{\aclp{DT} Observation}
%...................................

The \ac{HWoDT} adapter sends updates of the \ac{DTKG} on a WebSocket connection to the platform. Clients are set up to connect to the platform and observe each \ac{DT} through a WebSocket connection.
This aims to measure the delay introduced by the communication between the adapter and the platform, before getting to a final consumer. 
%
As the platform also supports observing the full \ac{DTE} \ac{KG}, a client also observes directly the \ac{KG} updates over a WebSocket connection (\circled{B}+\circled{C}+\circled{D}).
%
This is compared against direct observation of the \ac{DT}, which is implemented by sending each state update to an MQTT broker. Clients connect to all topics \texttt{dt/+/state} to observe all \acp{DT} (\circled{E}).

Whenever a message is received, the \emph{freshness} metric is computed as the difference between the timestamp of the message and the time the message is received using the system clock (which is synchronized as all processes run on the same machine). 
%
For the \ac{DTE} \ac{KG} as a new state update is generated for each change of each \ac{DT}, the greater timestamp among all \acp{DT} is taken to compute the freshness.

\Cref{fig:observation-delay} shows the average time difference with the different observation techniques. 
As expected, directly observing individual \acp{DT} is more efficient, as there is virtually no overhead. Users of the \ac{WoDT} platform should prefer this whenever possible, following the affordances of \acp{DT} in the \ac{DTD}.
%
In all scenarios, the delay grows with the number of \acp{DT}. This is especially evident when considering the observation of the whole \ac{DTE} \ac{KG}, which is the least efficient. Analyzing the performance of the prototype it was possible to deduce that this is caused by the serialization of the whole \ac{KG} to stream it at every update, which is computationally intensive. 
%
This is also the reason why the figure avoids reporting the observation of the ecosystem \ac{KG} with more than 1 client, as the results are significantly worse than the other options, even with just 1 client.
Performances are expected to be less drastically impacted when using smarter \ac{KG} update notification strategies---such as sending incremental changes (e.g., as in \cite{roffia2018fi})---at the cost of requiring more complex clients, capable of applying the changes to reconstruct the full state.

%...................................
\subsubsection{Repeated Querying}
%...................................

Clients can query the \ac{DTE} through the SPARQL endpoint of the \ac{WoDT} platform.
%
This is compared with performing an interrogation directly on all \acp{DT} to retrieve the current state and then filtering it on the client side which is implemented by having all \acp{DT} expose a simple HTTP endpoint \texttt{GET /state} to retrieve the current state of the \ac{DT} (similarly to what is shown in \Cref{fig:comparison-custom-vs-hwodt})
%
For each client, requests are sent every second, ideally, since \acp{DT} send updates at the same frequency, this would be a realistic way to monitor the sensor network in our scenario.

The overall time the operation takes is measured by computing the time of sending the request and the response for the SPARQL query, and the time of performing all HTTP requests and then filtering for the direct interaction.
The time of performing SPARQL queries (\circled{B}+\circled{C}+\circled{D}) is compared against the time taken by a client to perform an HTTP request to retrieve the state of each \ac{DT} and filter them on the client side \circled{E}.
%
\Cref{fig:query-time} shows that the average time taken to perform a query is significantly less than requesting the state on each \ac{DT}, especially when the number of \acp{DT} in the ecosystem grows. 
%
Notably, when running only 1 client, the overhead of the computation of the platform \ac{KG} makes using queries less effective. 

%...................................
\subsubsection{Comparison of Interaction Patterns}
%...................................

Results indicate that, with large numbers of \acp{DT}, using SPARQL queries becomes a more scalable and effective approach for observing the evolution of the ecosystem over time, comparable with direct observation of all \acp{DT}.
%
While this approach may not capture every individual update from each \ac{DT}, it reliably provides the latest available state at the time of each query.
In this experimental setting, for instance, querying every second is realistically sufficient to capture almost all updates, as the client would match the update frequency of the sensors.
This trade-off favors scalability and responsiveness, especially in dynamic settings where maintaining subscriptions for all \acp{DT} would be resource-intensive or impractical.

The centralized implementation of the platform makes it a potential bottleneck. Specifically, interacting with the \ac{DTE} KG is costly because the graph gets updated by all \acp{DT} updates.
%
This is a reasonable trade-off as interacting with the \ac{DTE} provides advanced functionalities that would be impossible or very difficult to replicate simply by interacting with individual \acp{DT}.
%
Nevertheless, it will be interesting to explore optimization techniques for future improvements of the platform, as well as decentralized approaches to provide ecosystem services that would make the system less reliant on the platform itself.

% %=================================================
% \section{Discussion, Limitations and Future Works}
% %=================================================


%==============================
\section{Final Remarks}
%==============================

This chapter presents a proposal for the engineering of heterogeneous \acp{DTE} grounded on principles and technologies from the Web and the Semantic Web.
%
The chapter addresses the research question:

\paragraph{\ref{rq:2} How to engineer DTEs which integrate heterogeneous DTs and support
applications in interacting with them?}
%%
The proposal of the \ac{HWoDT} addresses the challenges of integrating heterogeneous \acp{DT} by means of a uniform self-described interface that allows the representation of \ac{DT} interaction possibilities and metadata (through the \ac{DTD}) as well as the up-to-date state of the \ac{DT} (through the \ac{DTKG}).
%
The services and interfaces offered by the \ac{HWoDT} platform allow consumers to seamlessly interact with the \ac{DTE}, abstracting away the heterogeneity of the underlying \acp{DT}.
%
Consumers can either observe the evolution of the \ac{DTE} \ac{KG} or perform expressive queries to retrieve information through SPARQL. 
%
The prototype implementation of the \ac{HWoDT} platform and the set of adapters for representative \ac{DT} technologies demonstrate the feasibility of the approach in integrating \acp{DT} developed with different technologies through a shared semantic layer that can complement existing interoperability standards.
